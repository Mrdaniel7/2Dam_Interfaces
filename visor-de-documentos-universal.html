<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>Visor De documentos universal - Proceso de aplicaciones</title><meta name="description" content="Link aplicaci√≥n üëâ Hacker Elegante ‚Äî DocViewer Pro v3.4 IDE local Markdown/HTML live PDF/DOCX/ODT UX pro Extracto clave: ‚Äúf√°brica‚Äù que decide qu√© visor/editor&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="./visor-de-documentos-universal.html"><link rel="stylesheet" href="./assets/css/fontawesome-all.min.css?v=85514f933f9e0b82460af63f1a403fa5"><link rel="stylesheet" href="./assets/css/style.css?v=a43d11e6c8e1828dd0b983b73b3cdb13"><noscript><link rel="stylesheet" href="./assets/css/noscript.css?v=efa867a99f5064d6729e4dc2008ad50b"></noscript><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"./visor-de-documentos-universal.html"},"headline":"Visor De documentos universal","datePublished":"2025-12-12T13:14+01:00","dateModified":"2025-12-12T15:06+01:00","description":"Link aplicaci√≥n üëâ Hacker Elegante ‚Äî DocViewer Pro v3.4 IDE local Markdown/HTML live PDF/DOCX/ODT UX pro Extracto clave: ‚Äúf√°brica‚Äù que decide qu√© visor/editor&hellip;","author":{"@type":"Person","name":"Daniel Terroba Alcal√°","url":"./authors/daniel-terroba-alcala/"},"publisher":{"@type":"Organization","name":"Daniel Terroba Alcal√°"}}</script><style>#wrapper > .bg {
               background-image: url(./assets/images/overlay.png), linear-gradient(0deg, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url();
           }</style><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="is-preload page-template"><div id="wrapper"><header id="header"><a class="logo" href="./">Proceso de aplicaciones</a></header><nav id="nav"><ul class="links"><li><a href="./pomodoro-creciente.html" target="_self">Pomodoro viviente</a></li><li><a href="./calendario-multimedia.html" target="_self">Calendario Multimedia</a></li><li><a href="./guia-turistica-san-martin-de-la-vega.html" target="_self">Turismo San Martin de la Vega</a></li><li><a href="./clonar-listen-ai.html" target="_self">Listen Ai</a></li><li class="active"><a href="./visor-de-documentos-universal.html" target="_self">Visualizador de documentos</a></li></ul></nav><main id="main"><article class="post"><header class="major"><h1>Visor De documentos universal</h1><p class="post__inner"></p></header><div class="post__inner post__entry"><div class="post__toc"><h3>√çndice</h3><ul><li><a href="#link-app">Link aplicaci√≥n</a></li><li><a href="#funcionalidades">1. Funcionalidades (qu√© hace la app)</a><ul><li><a href="#funcionalidades-lista">1.1 Lista de funcionalidades</a></li><li><a href="#funcionalidades-codigo">1.2 D√≥nde est√° en el c√≥digo (extractos)</a></li></ul></li><li><a href="#v1-5">2. Versiones 1‚Äì5 (descubrimiento + prompts largos)</a><ul><li><a href="#v1-5-prompts">2.1 Resumen de prompts</a></li><li><a href="#v1-5-code">2.2 En qu√© parte del c√≥digo se hace</a></li><li><a href="#v1-5-img">2.3 Imagen del resultado</a></li></ul></li><li><a href="#v6-12">3. Versiones 6‚Äì12 (esquema de funcionalidades + checklist)</a><ul><li><a href="#v6-12-prompts">3.1 Resumen de prompts</a></li><li><a href="#v6-12-code">3.2 En qu√© parte del c√≥digo se hace</a></li><li><a href="#v6-12-img">3.3 Imagen del resultado</a></li></ul></li><li><a href="#v13-20">4. Versiones 13‚Äì20 (reinicios por contexto + est√©tica base final)</a><ul><li><a href="#v13-20-prompts">4.1 Resumen de prompts</a></li><li><a href="#v13-20-code">4.2 En qu√© parte del c√≥digo se hace</a></li><li><a href="#v13-20-img">4.3 Imagen del resultado</a></li></ul></li><li><a href="#v21-30">5. Versiones 21‚Äì30 (modo pro: UX + render/edici√≥n de formatos)</a><ul><li><a href="#v21-30-prompts">5.1 Resumen de prompts</a></li><li><a href="#v21-30-code">5.2 En qu√© parte del c√≥digo se hace</a></li><li><a href="#v21-30-img">5.3 Imagen del resultado</a></li></ul></li><li><a href="#prompt-maestro">6. Prompt maestro y metodolog√≠a</a><ul><li><a href="#prompt-maestro-completo">6.1 Prompt inicial (preguntas hasta ‚ÄúPARA‚Äù)</a></li><li><a href="#prompt-maestro-uso">6.2 C√≥mo lo us√© por ciclos (mini-prompts)</a></li></ul></li><li><a href="#mapa-codigo">7. Mapa r√°pido del c√≥digo</a></li><li><a href="#resultado-final">8. Resultado final</a></li></ul></div><h1 id="link-app">Link aplicaci√≥n</h1><p style="font-size: 20px; margin: 8px 0;">üëâ <a href="https://mrdaniel7.github.io/Lector-editor-de-documentos/" target="_blank" rel="noopener noreferrer">Hacker Elegante ‚Äî DocViewer Pro v3.4</a></p><p class="hint">¬†</p><h1 id="funcionalidades">1. Funcionalidades (qu√© hace la app)</h1><h2 id="funcionalidades-lista">1.1 Lista de funcionalidades</h2><div class="cm-block"><ul class="cm-list"><li><strong>IDE tipo ‚Äúpro‚Äù</strong>: header con acciones, pesta√±as (tabs), sidebar y panel central de trabajo.</li><li><strong>Abrir archivos locales</strong> (multi-select) y tratarlos como pesta√±as editables.</li><li><strong>Persistencia real</strong>: guarda archivos/estado en <strong>IndexedDB</strong> + restaura sesi√≥n (tabs abiertos) desde <strong>localStorage</strong>.</li><li><strong>Temas Dark/Light</strong> con variables CSS y toggle inmediato.</li><li><strong>Markdown pro</strong>: editor Monaco + preview en vivo + split view redimensionable + sincronizaci√≥n de scroll.</li><li><strong>HTML pro</strong>: editor Monaco + preview con <code>&lt;iframe&gt;</code> + split view + bot√≥n ‚ÄúActualizar‚Äù.</li><li><strong>Editor de c√≥digo</strong> (Monaco) con consola integrada y bot√≥n ‚ÄúRun‚Äù.</li><li><strong>Ejecuci√≥n</strong>:<ul><li><strong>JavaScript</strong> en local (eval controlado en consola).</li><li><strong>Python/Java/C++</strong> v√≠a <strong>Piston API</strong> (cloud compile/run).</li></ul></li><li><strong>PDF</strong>: visor por p√°ginas (PDF.js) + modo mano/dibujo/texto para anotaciones.</li><li><strong>Export PDF con anotaciones</strong> (PDF-Lib): hornea textos/dibujos encima del PDF.</li><li><strong>DOCX</strong>: visor (docx-preview) + bot√≥n ‚ÄúEditar‚Äù para pasar a editor tipo Word (Quill).</li><li><strong>ODT</strong>: visor ‚Äúalta fidelidad‚Äù leyendo <code>content.xml</code> (JSZip) + bot√≥n ‚ÄúEditar‚Äù (Quill).</li><li><strong>XLSX/CSV</strong>: visor r√°pido (Sheet ‚Üí HTML).</li><li><strong>Im√°genes y multimedia</strong>: visor simple para png/jpg/webp y audio/video.</li><li><strong>Paleta de comandos</strong> (Ctrl+K) + acciones seg√∫n contexto (con o sin tab activo).</li><li><strong>Atajos</strong>: modal de ayuda con shortcuts.</li><li><strong>Drafts</strong>: crear archivos de ejemplo (MD/HTML/JS/PY/Java) con demos y snippets ‚Äúbonitos‚Äù.</li><li><strong>Zoom de editor</strong> (Ctrl + rueda) para Monaco + indicador flotante.</li><li><strong>PWA m√≠nima</strong>: manifest + service worker inyectado (instalable).</li></ul><p style="margin-top: 10px;"><span class="cm-pill">IDE local</span> <span class="cm-pill">Markdown/HTML live</span> <span class="cm-pill">PDF/DOCX/ODT</span> <span class="cm-pill">UX pro</span></p></div><h2 id="funcionalidades-codigo">1.2 D√≥nde est√° en el c√≥digo (extractos)</h2><div class="cm-block"><ul class="cm-list"><li><strong>Routing por tipo de archivo</strong> ‚Üí <code>EditorFactory.createViewer()</code></li><li><strong>Persistencia</strong> ‚Üí <code>FileSystem</code> (IndexedDB) + <code>App.saveSession()/restoreSession()</code></li><li><strong>Markdown/HTML split</strong> ‚Üí <code>EditorFactory.createMarkdownView()</code> / <code>createHtmlView()</code></li><li><strong>PDF viewer/anotaci√≥n</strong> ‚Üí <code>EditorFactory.createPdfView()</code> + <code>exportPdfWithAnnotations()</code></li><li><strong>Office</strong> ‚Üí <code>createDocxViewer()</code>, <code>createOdtViewer()</code>, <code>createOfficeEditor()</code></li><li><strong>Paleta de comandos</strong> ‚Üí <code>UIManager.toggleCommandPalette()</code> + <code>App.generateCommandsList()</code></li></ul><p class="cm-caption" style="margin-top: 10px;">Extracto clave: ‚Äúf√°brica‚Äù que decide qu√© visor/editor usar</p><pre><code>static async createViewer(file) {
  const ext = file.name.split('.').pop().toLowerCase();

  if(['md','markdown'].includes(ext)) return this.createMarkdownView(file);
  if(['html'].includes(ext)) return this.createHtmlView(file);

  const codeExts = ['js','css','py','json','txt','java','cpp','c','h','xml','sql','php','go','rs','cs','ts'];
  if(codeExts.includes(ext)) return this.createCodeView(file, ext);

  if(file.contentRef &amp;&amp; (ext === 'docx' || ext === 'odt')) return this.createOfficeEditor(file, ext);

  if(ext === 'docx') return this.createDocxViewer(file);
  if(ext === 'odt')  return this.createOdtViewer(file);
  if(['xlsx','csv'].includes(ext)) return this.createXlsxView(file);
  if(['pdf'].includes(ext)) return this.createPdfView(file);

  const imgExts = ['png','jpg','jpeg','gif','svg','webp'];
  if(imgExts.includes(ext)) return this.createImageView(file);

  const mediaExts = ['mp3','wav','mp4','webm','ogg'];
  if(mediaExts.includes(ext)) return this.createMediaView(file, ext);

  return this.createHexView(file);
}</code></pre><p class="cm-caption">Qu√© hace este c√≥digo (muy breve):</p><div class="cm-block"><ul class="cm-list"><li>Detecta la extensi√≥n del archivo abierto.</li><li>Enruta a un visor/editor especializado (Markdown, HTML, Code, PDF, Office‚Ä¶).</li><li>Si hay contenido editado (<code>contentRef</code>), prioriza el modo editor.</li></ul></div></div><h1 id="v1-5">2. Versiones 1‚Äì5: descubrimiento + prompts largos</h1><h2 id="v1-5-prompts">2.1 Resumen de prompts (ciclos 1‚Äì5)</h2><div class="cm-block"><ul class="cm-list"><li>Arranqu√© con un <strong>prompt inicial</strong> describiendo la app y ped√≠ a la IA que <strong>hiciera preguntas</strong> hasta que yo dijera expl√≠citamente <strong>‚ÄúPARA‚Äù</strong>, para terminar con un prompt completo.</li><li>Met√≠ ese prompt en Codex, pero el resultado <strong>no me gustaba est√©ticamente</strong> y sent√≠ que la soluci√≥n era demasiado ‚Äúgen√©rica‚Äù.</li><li>Copi√© el chat completo (preguntas + respuestas) y lo pas√© por otra IA para que me generase un <strong>esquema de funcionalidades</strong> (lista clara de ‚Äútodo lo que quiero‚Äù).</li><li>Intent√© varios ciclos de ‚Äúc√≥digo actual + descripci√≥n + qu√© falta + genera prompt‚Äù, pero al meter prompts enormes la IA <strong>perd√≠a contexto</strong> y romp√≠a cosas.</li><li>Decid√≠ priorizar un enfoque: <strong>empezar simple</strong> y crecer por iteraciones, en vez de pedir ‚Äútodo a la vez‚Äù.</li></ul><p style="margin-top: 10px;"><span class="cm-pill">Prompt por preguntas</span> <span class="cm-pill">Contexto se rompe</span> <span class="cm-pill">Esquema de funcionalidades</span> <span class="cm-pill">Iteraci√≥n realista</span></p></div><h2 id="v1-5-code">2.2 En qu√© parte del c√≥digo se hace</h2><div class="cm-block"><ul class="cm-list"><li><strong>Base est√©tica y layout</strong> ‚Üí <code>&lt;style&gt;</code> (variables <code>:root</code>) + estructura <code>#app-shell</code></li><li><strong>Arquitectura ‚Äúclases‚Äù</strong> ‚Üí <code>PluginLoader</code>, <code>FileSystem</code>, <code>EditorFactory</code>, <code>UIManager</code>, <code>App</code></li></ul><p class="cm-caption" style="margin-top: 10px;">Extracto clave: temas por variables + modo light</p><pre><code>:root {
  --bg-app: #0f172a;
  --bg-panel: #1e293b;
  --accent: #6366f1;
  --text-primary: #f8fafc;
  --border: #334155;
}

[data-theme="light"] {
  --bg-app: #f1f5f9;
  --bg-panel: #ffffff;
  --text-primary: #0f172a;
  --border: #cbd5e1;
}</code></pre><p class="cm-caption">Qu√© hace este c√≥digo:</p><div class="cm-block"><ul class="cm-list"><li>Define el ‚Äúlook &amp; feel‚Äù completo sin reescribir componentes.</li><li>Permite alternar dark/light con un solo atributo HTML.</li></ul></div></div><h2 id="v1-5-img">2.3 Imagen del resultado</h2><p class="cm-caption">Primera base del layout tipo IDE (header + tabs + panel central).</p><figure class="post__image"><img loading="lazy" src="./media/posts/9/1.1.png" alt="" width="775" height="584" sizes="(max-width: 48em) 100vw, 768px" srcset="./media/posts/9/responsive/1.1-xs.png 300w, ./media/posts/9/responsive/1.1-sm.png 480w, ./media/posts/9/responsive/1.1-md.png 768w, ./media/posts/9/responsive/1.1-lg.png 1024w, ./media/posts/9/responsive/1.1-xl.png 1360w, ./media/posts/9/responsive/1.1-2xl.png 1600w"></figure><h1 id="v6-12">3. Versiones 6‚Äì12: esquema de funcionalidades + checklist</h1><h2 id="v6-12-prompts">3.1 Resumen de prompts</h2><div class="cm-block"><ul class="cm-list"><li>Convert√≠ el chat inicial en una <strong>descripci√≥n funcional</strong> (tipo ‚Äúespecificaci√≥n‚Äù) para no olvidarme nada.</li><li>Flujo repetido: <strong>(1) c√≥digo actual</strong> + <strong>(2) descripci√≥n</strong> ‚Üí ‚Äúdime qu√© falta‚Äù ‚Üí ‚Äúgenera un prompt concreto‚Äù.</li><li>Detect√© el problema: cuando el prompt mezclaba demasiadas features, la IA se <strong>desorientaba</strong> y romp√≠a la UX o la estructura.</li><li>Decid√≠ dividir por bloques: <strong>primero editor y persistencia</strong>, luego visores, luego exportaci√≥n y detalles pro.</li><li>Desde aqu√≠, casi todo se construy√≥ con <strong>mini-prompts</strong> (muy peque√±os) en vez de ‚Äúmega-prompts‚Äù.</li></ul><p style="margin-top: 10px;"><span class="cm-pill">Especificaci√≥n</span> <span class="cm-pill">Checklist ‚Äúqu√© falta‚Äù</span> <span class="cm-pill">Mini-prompts</span> <span class="cm-pill">Menos caos</span></p></div><h2 id="v6-12-code">3.2 En qu√© parte del c√≥digo se hace</h2><div class="cm-block"><ul class="cm-list"><li><strong>Persistencia</strong> ‚Üí <code>FileSystem</code> (IndexedDB) y sesi√≥n ‚Üí <code>saveSession()</code>/<code>restoreSession()</code></li><li><strong>Abrir archivos</strong> ‚Üí <code>openFileDialog()</code> + <code>handleFiles()</code></li></ul><p class="cm-caption" style="margin-top: 10px;">Extracto clave: guardar y restaurar sesi√≥n</p><pre><code>saveSession() {
  localStorage.setItem('hacker_session_v2',
    JSON.stringify(this.openTabs.map(t =&gt; t.id))
  );
}

async restoreSession() {
  const sessionIds = JSON.parse(localStorage.getItem('hacker_session_v2') || '[]');
  for (const id of sessionIds) {
    const file = await FileSystem.getFile(id);
    if (file) this.openTabs.push(file);
  }
  if (this.openTabs.length &gt; 0) this.activateTab(this.openTabs[0].id);
}</code></pre><p class="cm-caption">Qu√© hace este c√≥digo:</p><div class="cm-block"><ul class="cm-list"><li>Recuerda qu√© tabs estaban abiertas.</li><li>Reabre el estado al recargar (experiencia tipo app real).</li></ul></div></div><h2 id="v6-12-img">3.3 Imagen del resultado</h2><p class="cm-caption">Tabs funcionando + archivos persistentes + base ‚Äúusable‚Äù.</p><figure class="post__image"><img loading="lazy" src="./media/posts/9/1.3.png" alt="" width="1296" height="1076" sizes="(max-width: 48em) 100vw, 768px" srcset="./media/posts/9/responsive/1.3-xs.png 300w, ./media/posts/9/responsive/1.3-sm.png 480w, ./media/posts/9/responsive/1.3-md.png 768w, ./media/posts/9/responsive/1.3-lg.png 1024w, ./media/posts/9/responsive/1.3-xl.png 1360w, ./media/posts/9/responsive/1.3-2xl.png 1600w"></figure><h1 id="v13-20">4. Versiones 13‚Äì20: reinicios por contexto + est√©tica base final</h1><h2 id="v13-20-prompts">4.1 Resumen de prompts</h2><div class="cm-block"><ul class="cm-list"><li>Como la IA perd√≠a contexto, opt√© por <strong>empezar de cero</strong> varias veces hasta conseguir una est√©tica inicial que s√≠ me gustara.</li><li>Finalmente, <strong>Gemini</strong> me dio una versi√≥n est√©tica s√≥lida y a partir de ah√≠ ya no me mov√≠: mejor pulir que reescribir.</li><li>Desde aqu√≠ el foco cambi√≥: <strong>c√≥digo profesional + UX</strong>, no solo ‚Äúque funcione‚Äù.</li><li>Empec√© a hacer prompts muy peque√±os y concretos, usando la funci√≥n de ‚Äúmarcar espacio‚Äù para que cada cambio fuera controlado.</li><li>Objetivo: una experiencia tipo <strong>DocViewer / IDE</strong> limpia, r√°pida y estable.</li></ul><p style="margin-top: 10px;"><span class="cm-pill">Reset estrat√©gico</span> <span class="cm-pill">Est√©tica final</span> <span class="cm-pill">UX pro</span> <span class="cm-pill">Cambios m√≠nimos</span></p></div><h2 id="v13-20-code">4.2 En qu√© parte del c√≥digo se hace</h2><div class="cm-block"><ul class="cm-list"><li><strong>Split view + resizer</strong> ‚Üí <code>createMarkdownView()</code> y <code>createHtmlView()</code></li><li><strong>Monaco loader + workers</strong> ‚Üí <code>EditorFactory.loadMonaco()</code></li></ul><p class="cm-caption" style="margin-top: 10px;">Extracto clave: carga de Monaco (sin romper AMD)</p><pre><code>static async loadMonaco() {
  if (window.monaco) return window.monaco;
  await PluginLoader.load('monaco');
  return new Promise((resolve, reject) =&gt; {
    require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.52.0/min/vs' }});
    window.MonacoEnvironment = {
      getWorker: () =&gt; new Worker(URL.createObjectURL(new Blob([/* workerMain */], { type:'application/javascript' })))
    };
    require(['vs/editor/editor.main'], () =&gt; resolve(window.monaco), reject);
  });
}</code></pre><p class="cm-caption">Qu√© hace este c√≥digo:</p><div class="cm-block"><ul class="cm-list"><li>Carga Monaco bajo demanda.</li><li>Configura workers para que el editor funcione bien en navegador.</li></ul></div></div><h2 id="v13-20-img">4.3 Imagen del resultado</h2><p class="cm-caption">Vista ‚Äúpro‚Äù ya estable: header, tabs y workspace limpio.</p><figure class="post__image"><img loading="lazy" src="./media/posts/9/1.png" alt="" width="2559" height="1252" sizes="(max-width: 48em) 100vw, 768px" srcset="./media/posts/9/responsive/1-xs.png 300w, ./media/posts/9/responsive/1-sm.png 480w, ./media/posts/9/responsive/1-md.png 768w, ./media/posts/9/responsive/1-lg.png 1024w, ./media/posts/9/responsive/1-xl.png 1360w, ./media/posts/9/responsive/1-2xl.png 1600w"></figure><h1 id="v21-30">5. Versiones 21‚Äì30: modo pro (UX + render/edici√≥n de formatos)</h1><h2 id="v21-30-prompts">5.1 Resumen de prompts</h2><div class="cm-block"><ul class="cm-list"><li>Me centr√© ‚Äúa saco‚Äù en el <strong>c√≥digo</strong> porque es la parte con m√°s chicha: estructura limpia, clases claras, y UX consistente.</li><li>A√±ad√≠ soporte serio para <strong>Markdown</strong>, <strong>HTML</strong>, <strong>Python</strong>, <strong>JavaScript</strong> y ejemplos que prueban que todo renderiza bien.</li><li>La pelea grande fue <strong>visualizar y editar PDF/DOCX/ODT</strong> sin que se rompiera el layout ni el estado de edici√≥n.</li><li>Constru√≠ flujos: ver ‚Üí editar ‚Üí marcar ‚Äúdirty‚Äù ‚Üí guardar en navegador ‚Üí reabrir sesi√≥n.</li><li>Detalles ‚Äúpro‚Äù: paleta de comandos, atajos, drafts de ejemplo, zoom, toasts y ‚Äúpanic reset‚Äù.</li></ul><p style="margin-top: 10px;"><span class="cm-pill">PDF/DOCX/ODT</span> <span class="cm-pill">Edici√≥n real</span> <span class="cm-pill">Persistencia</span> <span class="cm-pill">Detalles pro</span></p></div><h2 id="v21-30-code">5.2 En qu√© parte del c√≥digo se hace</h2><div class="cm-block"><ul class="cm-list"><li><strong>PDF con anotaci√≥n</strong> ‚Üí <code>EditorFactory.createPdfView()</code></li><li><strong>Export PDF con anotaciones</strong> ‚Üí <code>EditorFactory.exportPdfWithAnnotations()</code></li><li><strong>DOCX</strong> ‚Üí <code>createDocxViewer()</code> (docx-preview) + <code>createOfficeEditor()</code> (Quill)</li><li><strong>ODT</strong> ‚Üí <code>createOdtViewer()</code> (JSZip + transform) + <code>createOfficeEditor()</code></li><li><strong>Guardar sin romper binarios</strong> ‚Üí <code>App.saveCurrent()</code> (textos actualizan blob; office mantiene blob)</li></ul><p class="cm-caption" style="margin-top: 10px;">Extracto clave: PDF ‚Äúmano / dibujo / texto‚Äù</p><pre><code>tb.innerHTML = `
  &lt;button id="pdf-hand" class="active"&gt;...&lt;/button&gt;
  &lt;button id="pdf-draw"&gt;...&lt;/button&gt;
  &lt;button id="pdf-text"&gt;...&lt;/button&gt;
`;

const setMode = (m, btn) =&gt; {
  mode = m;
  tb.querySelectorAll('button').forEach(b =&gt; b.classList.remove('active'));
  btn.classList.add('active');
  ctr.querySelectorAll('.pdf-page-wrapper').forEach(w =&gt; {
    w.classList.toggle('draw-mode', m === 'draw');
    w.style.cursor = m === 'text' ? 'text' : (m === 'hand' ? 'grab' : 'crosshair');
  });
};</code></pre><p class="cm-caption">Qu√© hace este c√≥digo:</p><div class="cm-block"><ul class="cm-list"><li>Cambia el modo de interacci√≥n del PDF sin recargar p√°ginas.</li><li>Activa capa de dibujo o inserci√≥n de texto seg√∫n modo.</li></ul></div><p class="cm-caption" style="margin-top: 12px;">Extracto clave: Office Editor (Quill) con <code>contentRef</code></p><pre><code>quill.on('text-change', () =&gt; {
  file.isDirty = true;
  file.contentRef = quill.root.innerHTML;
  App.instance.renderTabs();
});</code></pre><p class="cm-caption">Qu√© hace este c√≥digo:</p><div class="cm-block"><ul class="cm-list"><li>Marca el archivo como modificado (‚óè en la pesta√±a).</li><li>Guarda el HTML editado en memoria (<code>contentRef</code>) para persistencia y export.</li></ul></div></div><h2 id="v21-30-img">5.3 Imagen del resultado</h2><p class="cm-caption">Visores avanzados listos (PDF + Office + split editors) y UX pulida.</p><figure class="post__image"><img loading="lazy" src="./media/posts/9/2.png" alt="" width="1298" height="1075" sizes="(max-width: 48em) 100vw, 768px" srcset="./media/posts/9/responsive/2-xs.png 300w, ./media/posts/9/responsive/2-sm.png 480w, ./media/posts/9/responsive/2-md.png 768w, ./media/posts/9/responsive/2-lg.png 1024w, ./media/posts/9/responsive/2-xl.png 1360w, ./media/posts/9/responsive/2-2xl.png 1600w"></figure><h1 id="prompt-maestro">6. Prompt maestro y metodolog√≠a</h1><h2 id="prompt-maestro-completo">6.1 Prompt inicial (preguntas hasta ‚ÄúPARA‚Äù)</h2><p class="cm-caption">Este fue el enfoque inicial: un prompt base + la regla de que la IA deb√≠a hacer preguntas hasta que yo dijera ‚ÄúPARA‚Äù, y entonces devolver un prompt final completo. (Pega aqu√≠ tu prompt real si quieres que quede 100% literal.)</p><pre><code>Quiero que dise√±es una aplicaci√≥n web tipo ‚ÄúDocViewer / IDE‚Äù en un √∫nico HTML (HTML+CSS+JS).
Antes de proponer el prompt final, hazme preguntas una por una para concretar:
- Tipos de archivos soportados (md/html/pdf/docx/odt/xlsx‚Ä¶)
- Necesidades de edici√≥n, exportaci√≥n y persistencia local
- UX: tabs, sidebar, atajos, command palette, tema dark/light, etc.

Regla: NO generes el prompt final hasta que yo diga expl√≠citamente: ‚ÄúPARA‚Äù.
Cuando diga ‚ÄúPARA‚Äù, devu√©lveme:
1) Un prompt completo y ordenado
2) Una checklist de funcionalidades
3) Una lista de riesgos (p√©rdida de contexto, librer√≠as, rendimiento) y mitigaciones.</code></pre><h2 id="prompt-maestro-uso">6.2 C√≥mo lo us√© por ciclos (mini-prompts)</h2><div class="cm-block"><ul class="cm-list"><li>Prob√© con Codex usando prompts grandes, pero el resultado est√©tico no me convenc√≠a y el contexto se romp√≠a.</li><li>Convert√≠ el chat (Q&amp;A) en un <strong>esquema de funcionalidades</strong> y lo us√© como checklist externa.</li><li>Me di cuenta de que los <strong>mega-prompts</strong> eran el origen del caos: prefer√≠ <strong>muchos prompts peque√±os</strong> y concretos.</li><li>Cuando encontr√© una est√©tica base buena (Gemini), me qued√© ah√≠ y trabaj√© ‚Äúa bistur√≠‚Äù: peque√±os cambios, pruebas y mejoras de UX.</li><li>El enfoque final fue: <strong>profesionalizar el c√≥digo</strong> + soporte serio de formatos + experiencia de usuario impecable.</li></ul><p style="margin-top: 10px;"><span class="cm-pill">Mini-prompts</span> <span class="cm-pill">Checklist externa</span> <span class="cm-pill">UX first</span> <span class="cm-pill">C√≥digo pro</span></p></div><h1 id="mapa-codigo">7. Mapa r√°pido del c√≥digo</h1><div class="cm-block"><p class="cm-caption">Para localizarlo todo sin perderte (todo vive en un √∫nico HTML):</p><ul class="cm-list"><li><strong>UI base (layout + tema)</strong> ‚Üí <code>&lt;style&gt;</code> (variables <code>:root</code>, <code>#app-shell</code>, <code>.workspace</code>, <code>.tab</code>‚Ä¶)</li><li><strong>Carga de librer√≠as</strong> ‚Üí <code>PluginLoader</code></li><li><strong>Persistencia IndexedDB</strong> ‚Üí <code>FileSystem</code></li><li><strong>Visores/editores por formato</strong> ‚Üí <code>EditorFactory</code></li><li><strong>Modales, command palette, toasts</strong> ‚Üí <code>UIManager</code></li><li><strong>App state (tabs, active, session, save)</strong> ‚Üí <code>App</code></li><li><strong>Configuraci√≥n (fuente, panic reset)</strong> ‚Üí <code>SettingsManager</code></li><li><strong>Run cloud compile</strong> ‚Üí <code>CompilerService</code> (Piston)</li></ul><p class="cm-caption" style="margin-top: 10px;">Punto de entrada (inicio de la app):</p><pre><code>window.App = App;
window.UIManager = UIManager;
window.SettingsManager = SettingsManager;

// App.instance crea el singleton al primer acceso y restaura sesi√≥n
static get instance() {
  if(!window.__app) window.__app = new App();
  return window.__app;
}</code></pre></div><h1 id="resultado-final">8. Resultado final</h1><p class="cm-caption">Un DocViewer/IDE local con experiencia ‚Äúpro‚Äù: edici√≥n de Markdown/HTML/c√≥digo, visores para PDF/DOCX/ODT, persistencia y detalles de UX (comandos, atajos, drafts, zoom).</p><figure class="post__image"><img loading="lazy" src="./media/posts/9/3.png" alt="" width="2547" height="1265" sizes="(max-width: 48em) 100vw, 768px" srcset="./media/posts/9/responsive/3-xs.png 300w, ./media/posts/9/responsive/3-sm.png 480w, ./media/posts/9/responsive/3-md.png 768w, ./media/posts/9/responsive/3-lg.png 1024w, ./media/posts/9/responsive/3-xl.png 1360w, ./media/posts/9/responsive/3-2xl.png 1600w"></figure><p>¬†</p><figure class="post__image"><img loading="lazy" src="./media/posts/9/4.png" alt="" width="2324" height="1103" sizes="(max-width: 48em) 100vw, 768px" srcset="./media/posts/9/responsive/4-xs.png 300w, ./media/posts/9/responsive/4-sm.png 480w, ./media/posts/9/responsive/4-md.png 768w, ./media/posts/9/responsive/4-lg.png 1024w, ./media/posts/9/responsive/4-xl.png 1360w, ./media/posts/9/responsive/4-2xl.png 1600w"></figure></div></article></main><footer id="copyright"><p>¬© Daniel Terroba Alcala<br><br></p></footer></div><script src="./assets/js/jquery.min.js?v=c9771cc3e90e18f5336eedbd0fffb2cf"></script><script src="./assets/js/jquery.scrollex.min.js?v=f89065e3d988006af9791b44561d7c90"></script><script src="./assets/js/jquery.scrolly.min.js?v=1ed5a78bde1476875a40f6b9ff44fc14"></script><script src="./assets/js/browser.min.js?v=c07298dd19048a8a69ad97e754dfe8d0"></script><script src="./assets/js/breakpoints.min.js?v=81a479eb099e3b187613943b085923b8"></script><script src="./assets/js/util.min.js?v=4201a626f8c9b614a663b3a1d7d82615"></script><script src="./assets/js/main.min.js?v=56233c354bd814758be8bff42f7e13a5"></script><script>/*<![CDATA[*/var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};/*]]>*/</script></body></html>